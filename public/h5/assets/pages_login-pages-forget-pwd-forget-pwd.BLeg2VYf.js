import{_ as e}from"./uv-navbar.CCP2bw2Z.js";import{K as s,p as o,L as a,o as l,c as t,w as c,i as n,r,e as m,a as i,b as d,d as p,P as u,m as f,t as _,Q as g,R as b,a9 as v,a8 as w}from"./index-Dmu3mr1_.js";import{_ as x}from"./uv-button.CRA7t01f.js";import{_ as h}from"./uv-code.DyexNmvp.js";import{_ as y,a as V,b as F}from"./icon_pwd.BPSJVt6e.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";const k=j({__name:"forget-pwd",setup(j){s(),o("忘记密码");const k=a({mobile:"",password:"",captcha:"",password_confirm:""}),C=o(60),U=o(""),B=o(),E=e=>{U.value=e};return l((e=>{console.log("options",e)})),(s,o)=>{const a=r(m("uv-navbar"),e),l=p,j=u,Q=n,R=r(m("uv-button"),x),S=r(m("uv-code"),h);return i(),t(Q,{class:""},{default:c((()=>[d(a,{title:"忘记密码","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),d(Q,{class:"px-32"},{default:c((()=>[d(Q,{class:"login-form mt-56"},{default:c((()=>[d(Q,{class:"login-form-item px-40 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:y,mode:""}),d(j,{modelValue:k.mobile,"onUpdate:modelValue":o[0]||(o[0]=e=>k.mobile=e),class:"ml-16 login-input",type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),d(Q,{class:"login-form-item mt-40 pl-40 pr-28 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:V,mode:""}),d(j,{modelValue:k.captcha,"onUpdate:modelValue":o[1]||(o[1]=e=>k.captcha=e),class:"mx-16 login-input",type:"text",placeholder:"验证码"},null,8,["modelValue"]),d(Q,{class:"send-btn center",onClick:o[2]||(o[2]=e=>(async()=>{k.mobile?11==String(k.mobile).length?B.value.canGetCode?(await b({mobile:k.mobile,event:"changepwd"}),g("验证码已发送"),B.value.start()):g("倒计时结束后再发送"):g("手机号格式不正确"):g("请输入手机号")})())},{default:c((()=>[f(_(U.value),1)])),_:1})])),_:1}),d(Q,{class:"login-form-item px-40 mt-40 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:F,mode:""}),d(j,{modelValue:k.password,"onUpdate:modelValue":o[3]||(o[3]=e=>k.password=e),class:"ml-16 login-input",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),d(Q,{class:"login-form-item px-40 mt-40 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:F,mode:""}),d(j,{modelValue:k.password_confirm,"onUpdate:modelValue":o[4]||(o[4]=e=>k.password_confirm=e),class:"ml-16 login-input",type:"password",placeholder:"确认密码"},null,8,["modelValue"])])),_:1}),d(Q,{class:"login-form-submit-btn",onClick:o[5]||(o[5]=e=>(async()=>{console.log("submit",k);const e=[{key:"mobile",message:"请输入手机号"},{key:"captcha",message:"请输入验证码"},{key:"password",message:"请输入密码"},{key:"password_confirm",message:"请输入确认密码"}].find((e=>!k[e.key]));if(e)return g(e.message);if(k.password!=k.password_confirm)return g("两次输入的密码不一致");const s=await v(k);console.log("resetpwd",s),g("修改成功"),setTimeout((()=>{w()}),600)})())},{default:c((()=>[d(R,{text:"确认重置",shape:"circle",color:"#E42B28"})])),_:1})])),_:1})])),_:1}),d(S,{seconds:C.value,ref_key:"code",ref:B,onChange:E},null,8,["seconds"])])),_:1})}}},[["__scopeId","data-v-0efc7423"]]);export{k as default};
