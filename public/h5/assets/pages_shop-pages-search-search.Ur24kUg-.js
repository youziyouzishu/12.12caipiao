import{_ as e}from"./uv-navbar.CCP2bw2Z.js";import{p as s,L as a,o as l,c as o,w as r,u as t,r as c,e as i,a as d,g as n,i as A,b as g,m as u,d as m,h as p,F as v,j as f,t as h,D as k,$ as y,x as w,P as x,O as D,l as U,Q as b,aL as F}from"./index-Dmu3mr1_.js";import{_ as O}from"./z-paging.BBWlMYJs.js";import{_ as B}from"./icon_search_close.B8tPxAGe.js";import{_ as K}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";const C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAgCAYAAAAi7kmXAAAAAXNSR0IArs4c6QAAAa1JREFUSEvtlD9PAkEQxd/cYTDGggo0aKIRkFsosDDRkg6jlgT8INZAaP0gWovRjoKS4go4TgiJJGIinYUxJsKOOfX4Y06OoKVX7szvZnb2zSPM+dGcHP4efNAiGUmUbTea6STQ/96ZY8VuOJzAgloBYZmZz9YbzVNX8G5jw7ewtFgFIWQnk5TZoNm6GIcnKpYBT0hsXxJRaqIC41lFf2+10TaGPxtPeBDRHBPyjpNmtN9eXnc3O50nKz6s2NXCh1DU0tTnkbK0ZraOh+B9bCsEeKoE8rm9KzHywcZtgT7vFdWJEHeDvuJ9sEx9gBERLTKwMg0koGPHBwO++nvluLX9X3HKhOYfTrlc9vj9/iJcBADgUVGUV6sJKeUNWWAgENCB2STHzH0iOvho1TAMa2mrRDOInCivaVpheMdarXakquqli2JKQojRWtnJpmnmmNl5kYE2M+/EYrHniUUeg6+ZedI6ACt5XwhRd7QO61DXdZ/X660CI7OSUp7E4/HzH83KDhiGkSCiCoBlIjrTNM3dHm24Xq9nFUXJ9Hq9dDKZnM2Q3XbRcTizQL8C3wHvcId400Ok9QAAAABJRU5ErkJggg==",Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAgCAYAAAAi7kmXAAAAAXNSR0IArs4c6QAAAcNJREFUSEvtlD9LHFEUxc/ZTbqFBGIgBBVClMx7k2Zgy6RYtJGkNGAr+AWCpPIrCBbWglYWJlUCSWFvk5DqvZnxDyw4i7CkFHbQdW4YcWbdZHZ3slhmioF59/64d9695xBjPhyTw92CQRCsJUkyobV+P6ijvypaa98A+HIDrGitt4rgPtAYM0PyJ4DaTXJM8pVS6sefcA4aY2okDwC8vJ0kIlGn0/Hq9fqv2+c56Pv+nogsFrUlIvvtdnuh0Wh0s/g16Pv+qoisDxsNyXWl1IccNMbMAfhG8t6omZJcVEp9SvNorT0D8GQUlMZF5ByA57rucQpukHw4CBSRLskoi8dxvON5XvNuN6dM2/8rDrml8S+npZ1N6cmosAaBZha4SLDzLAiaPHWdM5ZcOQDnEl96Uycnx2yp2XmpVL8CGLnk6Mq7yTD8eL3k6SvSziqIobJKZTdlw56sst5bytmVCpYKf1Kwf2SDhQbQL+Q02ejHtQd4dAD2WwcgUeVSvKeHh8XWkcKn7vMZ4n7PrETi5Aqvp8Pw+0CzygKRM/sW1ern9DuRq+Vpe7Q90h5zWL1YQwUTkyYsb8hltJiPo2xyoa/+K/wbLLOaIdOAIyAAAAAASUVORK5CYII=",j=K({__name:"search",setup(K){const j=s(1),J=s(null),W=s([]),Y=a({keywords:"",order:1}),Z=s([]),M=()=>{Z.value=[],t.setItem("searchLog",Z.value),j.value=1,J.value.reload()},S=(e=1)=>{1==e?Y.order=e:-1!=[2,3].indexOf(e)?-1==[2,3].indexOf(Y.order)?Y.order=e:Y.order=2==Y.order?3:2:-1!=[4,5].indexOf(e)&&(-1==[4,5].indexOf(Y.order)?Y.order=e:Y.order=4==Y.order?5:4),J.value.reload()},I=async()=>{Y.keywords?(((e,s=9)=>{const a=Z.value.indexOf(e);-1!==a&&Z.value.splice(a,1),Z.value.length>=s&&Z.value.shift(),Z.value.push(e),t.setItem("searchLog",Z.value)})(Y.keywords),j.value=2,J.value.reload()):b("请输入关键词")},V=async(e,s)=>{if(1==j.value)return void J.value.complete([]);const a=await F({page:e,order:Y.order,keyword:Y.keywords});console.log("getGoodsList",a),J.value.complete(a)};return l((e=>{console.log("options",e),(()=>{try{const e=t.getItem("searchLog");Array.isArray(e)?Z.value=e:Z.value=[]}catch(e){console.error("Error initializing search log:",e),Z.value=[]}})()})),(s,a)=>{const l=c(i("uv-navbar"),e),t=m,b=x,F=A,K=U,R=c(i("z-paging"),O);return d(),o(R,{ref_key:"paging",ref:J,modelValue:W.value,"onUpdate:modelValue":a[6]||(a[6]=e=>W.value=e),onQuery:V,auto:!1,"refresher-enabled":2==j.value,"loading-more-enabled":2==j.value,"hide-no-more-inside":"","paging-style":{background:1==j.value?"#FFFFFF":"#F5F5F5"}},{top:r((()=>[g(l,{title:"搜索","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),g(F,{class:"search-box px-32 py-20 flex items-center justify-between bg-white"},{default:r((()=>[g(F,{class:"search-input pl-40 pr-30 flex items-center"},{default:r((()=>[g(t,{class:"icon-search",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABYhJREFUWEfNmF+IFXUUx79n5q57BSE1pRvtg5KBkd67W5A7qzs6YLDCRgYJigb5IBYlFvRQZGRkZFQgWOSDoKDQSj4YGRUtjPeue+diG97ZzXrIMMiHBbddkS1n3fnNaWfm/t+Z+29X2N/j/Z3fOZ85/37ndwkLfNEC50PTgOl09pFpoFciijF4FRgrQDQJ8BiBxlhyhsR/i5Ka9sTkXJzQEKCuX10aiUqvOsw7iWhdLcPMsIhwmcEnNyvt52rJB+3XBajrejSyePl+x+HDRLS0GUPMnCVIr6td8WQj52sC5kJ5kYjaAxSPgigDdsOKm2CKMiEGYBWYO0GIzj7DJ4Q1cUDTNLse0KqAA4a5wQEuEDyj/mJYkHBC2DinbUpkwozo+rUlaL23VSb5IMBbKuT6heXs0LSO27UgQwE9OEY/EZYUlBD6hGO/q3U9db2W4tJ9PW32SMTHCbSm8J3MWWeqpbtWEQUC6rrZJkXxc9FzbBOkQ91K/ONGwMog9WtL5Kj9NYCeYjT4gtrV/nw1nbMA3YKQWpcZxZxjGw7tUjcmzjcLlz+n63pEjj54CuA9+d9mAA53K4n3w3TPAhzImAeZcayogN6ai+cqDfuQy3UAm7yUZrYdiMfD0qYM0O1zUivdKLQSQp/amdg1V8/NhrwSk6OLRgBakdvrU5VgO2WAA4b5DgNH8tUqYK9vtCDq/ZjKSAkH67WNiV8rz5cBJtPmCBH8G4JwTO1MvFGvwUbl3FBL0eV/kNszPXM41K0kPgwF1DNmm8z4Oy8gBJRqfa5RoCD5VMb8BIw3vVwEMpuVhBIKmExn9xPRiZzAqKokHp4PiGo6dOPqFhmSWzDeEpazrLJ5F0I8YJjvMXDYDy9dUDvjVfvTfMDnKnq6ABiQhwXAlDHs9qeXcsInVSWxbz4gaulIGdlb+WoWEM9oypP9pWdKAM1vAfTmErZq86xltJH9AcP8nYG1/hlnr6p0nA4D/ArATg+Q6Wh3V/ztRgw1K5syzBve9OPxwb2x+kIAh4/PTMOv+Zt0WlXie5s12si5ZNq8S7mxTMDRNKXjUiBgWZGALqlKXGvEUDOy7s0lR6WJQpGw/VjlxVDIQT2d7ZWJ3DyEO6o7U5GVtUahZqBKzySN4d0EPuv9xpgUU+MrNU2zAj3oDphyq32rMAUTbVc749/MFaLa+ZQxfKYw2YS0trKrLmWYPwHY6ivlS6rSft/CrOtXYlJr6418/gHOPlXpOFn5QeXTzKC5U5bgVrO/JO5RN7T/eD+8mDKypwDy+y7jtphyVgc9AWbNg8m0eZUI3gOJwdcdq6VjvnMxlR7ezHD6iSji9YyQQSG3V+6fyvtx5nX2g5iaeLbeV1gtb+vpX9ZIJBtUnAVHhTW+urI48noC3yQpw/wSwMtFY3xWWBN75wo5ODjyqC05FwlYy2DXc7aAs63yegus4tIfc5f498WC8QJ+WVj3dmja06O1vBS074WVnPOu52aGkvx/LsPCimyslkKhz05//Jf0fD7mcnJMIjpi3x3/ol5vZjIjD91jcZQZe9yc8z1Xatb98JZtYZBVH+5eb1w8fQZM20u9wsx/AeR646KY+mewEnZo6M8H/p2+00ugHmZ6odhKvM+0AfoNQLwkhUIha/714Srxr0E+BPhVV7kYPAamMRBHwRQrByqTHhUQL8JqzchR200h72Xnr2BP1gXoHnerT5YiH4D9iaehxbg98w/Fp7Y1/lm+Wr3o1AFZN2AeSB8010UkPOcAvQR0hoIyJiFRP1h8JyycD2rC9UA2DFhe7UMrsKglBknEZFAbHMkSkjMKdm5i6s7NsN5WriPQk5+rSvsBV25OgA2FuYrwLE+WDA4LAtDLcS8nxUcgtIm71iv5frtgAMMcvOAB/wc4pWRH8KP7cQAAAABJRU5ErkJggg==",mode:""}),g(b,{class:"input",modelValue:Y.keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>Y.keywords=e),type:"text",placeholder:"请输入关键词搜索"},null,8,["modelValue"]),Y.keywords?(d(),o(t,{key:0,class:"icon-40",src:B,mode:"",onClick:a[1]||(a[1]=e=>(Y.keywords="",j.value=1,void J.value.reload()))})):n("",!0)])),_:1}),g(F,{class:"search-btn center",onClick:a[2]||(a[2]=e=>I())},{default:r((()=>[u(" 搜索 ")])),_:1})])),_:1}),2===j.value?(d(),o(F,{key:0,class:"px-32 pb-20 bg-white"},{default:r((()=>[g(F,{class:"sort-box flex items-center justify-between px-50"},{default:r((()=>[g(F,{class:D(["sort-item",{"sort-item-active":1==Y.order}]),onClick:a[3]||(a[3]=e=>S(1))},{default:r((()=>[u(" 综合 ")])),_:1},8,["class"]),g(F,{class:D(["sort-item flex items-center",{"sort-item-active":-1!=[4,5].indexOf(Y.order)}]),onClick:a[4]||(a[4]=e=>S(4))},{default:r((()=>[g(K,null,{default:r((()=>[u("价格")])),_:1}),g(F,{class:"ml-10"},{default:r((()=>[4==Y.order?(d(),o(t,{key:0,class:"icon-sort",src:C,mode:"widthFix"})):5==Y.order?(d(),o(t,{key:1,class:"icon-sort",src:Q,mode:"widthFix"})):n("",!0)])),_:1})])),_:1},8,["class"]),g(F,{class:D(["sort-item flex items-center",{"sort-item-active":-1!=[2,3].indexOf(Y.order)}]),onClick:a[5]||(a[5]=e=>S(2))},{default:r((()=>[g(K,null,{default:r((()=>[u("销量")])),_:1}),g(F,{class:"ml-10"},{default:r((()=>[2==Y.order?(d(),o(t,{key:0,class:"icon-sort",src:C,mode:"widthFix"})):3==Y.order?(d(),o(t,{key:1,class:"icon-sort",src:Q,mode:"widthFix"})):n("",!0)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})):n("",!0)])),default:r((()=>[1===j.value?(d(),o(F,{key:0,class:"px-30 pb-40 pt-20"},{default:r((()=>[g(F,{class:"search-log-box"},{default:r((()=>[g(F,{class:"flex items-center justify-between"},{default:r((()=>[g(F,{class:"search-log-title"},{default:r((()=>[u(" 历史搜索 ")])),_:1}),g(F,{class:"search-log-clear flex items-center",onClick:M},{default:r((()=>[g(t,{class:"icon-del",src:"/h5/static/icons/icon_del.png",mode:""})])),_:1})])),_:1})])),_:1}),g(F,{class:"search-log-list mt-20 flex flex-wrap"},{default:r((()=>[(d(!0),p(v,null,f(Z.value,((e,s)=>(d(),o(F,{class:"search-log-list-item",key:s,onClick:s=>{return a=e,Y.keywords=a,void I();var a}},{default:r((()=>[u(h(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):n("",!0),2===j.value?(d(),o(F,{key:1,class:"px-32 pt-20 pb-40 search-goods-list flex flex-wrap"},{default:r((()=>[(d(!0),p(v,null,f(W.value,((e,s)=>(d(),o(F,{class:"search-goods-list-item",key:e.id,onClick:s=>k(y)("/pages_shop/pages/goods-detail/goods-detail",{id:e.id})},{default:r((()=>[g(t,{class:"goods-cover",src:k(w)(e.image),mode:"aspectFill"},null,8,["src"]),g(F,{class:"py-16 px-12"},{default:r((()=>[g(F,{class:"goods-name text_ovf2"},{default:r((()=>[u(h(e.name),1)])),_:2},1024),g(F,{class:"flex items-center justify-between mt-8"},{default:r((()=>[g(F,{class:"flex items-center"},{default:r((()=>[g(F,{class:"goods-price"},{default:r((()=>[u(" ￥"+h(e.price),1)])),_:2},1024),g(F,{class:"goods-old-price ml-16"},{default:r((()=>[u(" ￥"+h(e.original_price),1)])),_:2},1024)])),_:2},1024),g(F,{class:"goods-sale"},{default:r((()=>[u(" 成交量："+h(e.sales),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):n("",!0)])),_:1},8,["modelValue","refresher-enabled","loading-more-enabled","paging-style"])}}},[["__scopeId","data-v-7cc5f747"]]);export{j as default};
