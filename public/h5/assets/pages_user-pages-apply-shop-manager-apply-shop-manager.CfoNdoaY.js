import{p as a,L as e,o as s,c as l,w as o,i as t,r as c,e as i,a as m,b as n,m as u,d,D as r,x as p,E as f,P as g,H as _,as as v,Q as h,at as y,a8 as b,au as F,T as x,av as w}from"./index-Dmu3mr1_.js";import{_ as j}from"./uv-navbar.CCP2bw2Z.js";import{_ as V}from"./uv-button.CRA7t01f.js";import{_ as k,a as T}from"./upload.tw_7YFVg.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as S}from"./common.knSLbAE6.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";const E=C({__name:"apply-shop-manager",setup(C){const E=a(1),L=a("申请成为店长"),U=e({id:"",image:"",name:"",wechat:"",address:""}),B=async()=>{1==E.value?M():2==E.value&&(U.id?(console.log("编辑"),Q()):(console.log("新增"),P()))},M=async()=>{await y(U),h("申请成功"),setTimeout((()=>{b()}),800)},P=async()=>{await w(U),h("新增成功"),x("refreshMaintainShopList"),setTimeout((()=>{b()}),800)},Q=async()=>{await F(U),h("编辑成功"),x("refreshMaintainShopList"),setTimeout((()=>{b()}),800)};return s((a=>{if(console.log("options",a),E.value=a.type??1,2==a.type)if(L.value="上传号码照片",a.id){console.log("编辑"),U.id=a.id,L.value="编辑彩票店";const e=a.data?JSON.parse(a.data):{};e.id&&(U.image=e.image,U.name=e.name,U.wechat=e.wechat)}else console.log("新增"),L.value="新增彩票店"})),(a,e)=>{const s=c(i("uv-navbar"),j),y=t,b=d,F=g,x=c(i("uv-button"),V);return m(),l(y,{class:""},{default:o((()=>[n(s,{title:L.value,fixed:"","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""},null,8,["title"]),n(y,{class:"px-32 py-20"},{default:o((()=>[n(y,{class:"upload-box"},{default:o((()=>[n(y,{class:"upload-tips"},{default:o((()=>[u(" 上传微信二维码（仅限一张） ")])),_:1}),n(y,{class:"mt-20 upload-images flex flex-wrap"},{default:o((()=>[U.image?(m(),l(y,{key:0,class:"upload-image mr-20"},{default:o((()=>[n(b,{class:"upload-image",src:r(p)(U.image),mode:"aspectFill",onClick:e[0]||(e[0]=a=>(console.log("预览"),void _({urls:[p(U.image)]})))},null,8,["src"]),n(b,{class:"icon-del icon-40",src:k,mode:"",onClick:e[1]||(e[1]=f((a=>(console.log("删除"),void(U.image=""))),["stop"]))})])),_:1})):(m(),l(b,{key:1,class:"upload-image",src:T,mode:"",onClick:e[2]||(e[2]=a=>(console.log("上传"),void v({count:1,success:async a=>{const e=a.tempFilePaths,s=a.tempFiles;console.log("需要上传的临时地址",e,s);try{const a=await S(e[0]);console.log("上传完毕",a),U.image=a.data.url,h("上传成功")}catch(l){console.log("e",l)}}})))}))])),_:1})])),_:1}),n(y,{class:"form mt-46"},{default:o((()=>[n(y,{class:"form-item"},{default:o((()=>[n(y,{class:"form-item-label"},{default:o((()=>[u(" 彩票站网点号： ")])),_:1}),n(y,{class:"form-item-content center"},{default:o((()=>[n(F,{modelValue:U.name,"onUpdate:modelValue":e[3]||(e[3]=a=>U.name=a),class:"input",type:"text",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),n(y,{class:"form-item mt-20"},{default:o((()=>[n(y,{class:"form-item-label"},{default:o((()=>[u(" 彩票店微信号： ")])),_:1}),n(y,{class:"form-item-content center"},{default:o((()=>[n(F,{modelValue:U.wechat,"onUpdate:modelValue":e[4]||(e[4]=a=>U.wechat=a),class:"input",type:"text",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),n(y,{class:"form-item mt-20"},{default:o((()=>[n(y,{class:"form-item-label"},{default:o((()=>[u(" 彩票店地址： ")])),_:1}),n(y,{class:"form-item-content center"},{default:o((()=>[n(F,{modelValue:U.address,"onUpdate:modelValue":e[5]||(e[5]=a=>U.address=a),class:"input",type:"text",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1}),n(y,{class:"submit-btn mt-100 pt-100"},{default:o((()=>[n(x,{shape:"circle",text:"确认",color:"#E42B28",onClick:B})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-05d24feb"]]);export{E as default};
