import{L as a,p as e,M as s,o,c as l,w as t,i as c,r as i,e as m,a as u,b as r,h as n,F as p,j as d,d as f,D as _,x as v,E as g,m as b,l as j,t as F,H as k,as as x,Q as y,Y as C,aJ as h,a8 as w}from"./index-Dmu3mr1_.js";import{_ as E}from"./uv-navbar.CCP2bw2Z.js";import{_ as T}from"./uv-button.CRA7t01f.js";import{_ as B}from"./uv-datetime-picker.Ckuv3hMz.js";import{_ as P,a as Q}from"./upload.tw_7YFVg.js";import{_ as Y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as D}from"./common.knSLbAE6.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";import"./uv-picker.BuhF9qD7.js";import"./uv-popup.-CA74lk7.js";import"./uv-overlay.CooXhWSs.js";const H=Y({__name:"upload-code-info",setup(Y){const H=a({images:"",early_stop_time:"",end_stop_time:""}),I=e([]),J=e(),L=e("");s((()=>{H.images=I.value.join(",")}));const M=(a="")=>{J.value.open(),L.value=a},R=a=>{console.log("handleTimeConfirm",a,L.value),1==L.value?H.early_stop_time=a.value:2==L.value&&(H.end_stop_time=a.value)};return o((a=>{console.log("options",a)})),(a,e)=>{const s=i(m("uv-navbar"),E),o=f,Y=c,L=j,S=i(m("uv-button"),T),V=i(m("uv-datetime-picker"),B);return u(),l(Y,{class:""},{default:t((()=>[r(s,{title:"上传号码照片",fixed:"","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),r(Y,{class:"px-32 py-20"},{default:t((()=>[r(Y,{class:"upload-box"},{default:t((()=>[r(Y,{class:"mt-20 upload-images flex flex-wrap"},{default:t((()=>[(u(!0),n(p,null,d(I.value,((a,e)=>(u(),l(Y,{class:"upload-image mr-10 mb-20",key:e},{default:t((()=>[r(o,{class:"upload-image",src:_(v)(a),mode:"aspectFill",onClick:a=>(a=>{console.log("预览");const e=I.value.map((a=>v(a)));k({urls:e,current:a})})(e)},null,8,["src","onClick"]),r(o,{class:"icon-del icon-40",src:P,mode:"",onClick:g((a=>(a=>{console.log("删除"),I.value=I.value.filter(((e,s)=>s!=a))})(e)),["stop"])},null,8,["onClick"])])),_:2},1024)))),128)),r(o,{class:"upload-image mb-20",src:Q,mode:"",onClick:e[0]||(e[0]=a=>(console.log("上传"),void x({count:200,success:async a=>{try{const e=a.tempFilePaths,s=a.tempFiles;console.log("需要上传的临时地址",e,s);let o=[];for(let a=0;a<e.length;a++){const s=e[a],l=await D(s);o.push(l.data.url)}y("上传成功"),I.value=I.value.concat(o)}catch(e){console.log("e",e),C()}}})))})])),_:1})])),_:1}),r(Y,{class:"form mt-46"},{default:t((()=>[r(Y,{class:"form-item"},{default:t((()=>[r(Y,{class:"form-item-label"},{default:t((()=>[b(" 选择早场截止时间： ")])),_:1}),r(Y,{class:"form-item-content center"},{default:t((()=>[r(L,{class:"input",onClick:e[1]||(e[1]=a=>M(1))},{default:t((()=>[b(F(H.early_stop_time||"请选择"),1)])),_:1})])),_:1})])),_:1}),r(Y,{class:"form-item mt-20"},{default:t((()=>[r(Y,{class:"form-item-label"},{default:t((()=>[b(" 选择晚场截止时间： ")])),_:1}),r(Y,{class:"form-item-content center"},{default:t((()=>[r(L,{class:"input",onClick:e[2]||(e[2]=a=>M(2))},{default:t((()=>[b(F(H.end_stop_time||"请选择"),1)])),_:1})])),_:1})])),_:1}),r(Y,{class:"submit-btn mt-100 pt-100"},{default:t((()=>[r(S,{shape:"circle",text:"确认",color:"#E42B28",onClick:e[3]||(e[3]=a=>(async()=>{console.log("formdata",H),await h(H),y("上传成功"),setTimeout((()=>{w()}),800)})())})])),_:1})])),_:1})])),_:1}),r(V,{ref_key:"datetimePicker",ref:J,mode:"time",onConfirm:R},null,512)])),_:1})}}},[["__scopeId","data-v-8ebe93c1"]]);export{H as default};
