import{_ as a}from"./uv-navbar.CCP2bw2Z.js";import{z as e,A as s,p as o,o as t,u as i,c as l,w as r,i as c,r as p,e as n,a as u,b as f,d,D as m,x as v,m as y,t as g,l as x,$ as A,ax as _,Q as w}from"./index-Dmu3mr1_.js";import{_ as F}from"./uv-button.CRA7t01f.js";import{_ as b,d as h}from"./payment.SSwwOwnZ.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";import"./uv-popup.-CA74lk7.js";import"./uv-overlay.CooXhWSs.js";import"./icon_radio_check.ClKEc5B7.js";import"./icon_radio3.CadTa7NB.js";const I=E({__name:"vip",setup(E){const I=e(),{userinfo:D}=s(I),K=o("wxpay"),N=o(),j=o({}),B=a=>{const e=new Date(a),s=new Date;if(s.setHours(0,0,0,0),e<s)return"";const o=e.getTime()-s.getTime();return Math.ceil(o/864e5)},U=()=>{N.value.open()},J=async a=>{const e={wxpay:1,alipay:2,money:4};console.log("handlePayConfirm e",a,e[a.type]);const s=e[a.type],o=await _({pay_type:s});return console.log("createVipOrder",o),4==s?(w("开通成功"),void I.getUserInfo()):2==s?(await h({payType:"alipay",payInfo:o.playload}),void I.getUserInfo()):void(1==s&&(await h({payType:"wechat",payInfo:{orderInfo:o.playload}}),I.getUserInfo()))};return t((a=>{console.log("options",a);const e=i.getItem("config");e&&(j.value=e)})),(e,s)=>{const o=p(n("uv-navbar"),a),t=d,i=c,_=x,w=p(n("uv-button"),F),h=p(n("c-pay-popup"),b);return u(),l(i,{class:"vip-container px-32"},{default:r((()=>[f(o,{title:"开通中心",fixed:"","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),f(i,{class:"vip-userinfo-box"},{default:r((()=>[f(i,{class:"userinfo-box flex items-center"},{default:r((()=>[f(i,{class:"user-avatar"},{default:r((()=>[f(t,{class:"user-avatar",src:m(v)(m(D).avatar),mode:"aspectFill"},null,8,["src"])])),_:1}),f(i,{class:"flex-1 px-20"},{default:r((()=>[f(i,{class:"user-name"},{default:r((()=>[y(g(m(D).nickname),1)])),_:1}),f(i,{class:"mt-4 user-id"},{default:r((()=>[y(" ID:"+g(m(D).id),1)])),_:1})])),_:1})])),_:1}),f(i,{class:"vip-endtime-tip mt-16"},{default:r((()=>[y(" 会员"+g(m(D).vip_expire_time)+"到期，会员时间还剩"+g(B(m(D).vip_expire_time)||0)+"天 ",1)])),_:1}),f(t,{class:"vip-tag",src:"/h5/static/images/vip_image.png",mode:""})])),_:1}),f(i,{class:"vip-config-box mt-20 center flex-column"},{default:r((()=>[f(i,{class:"vip-config-title"},{default:r((()=>[y(" 月度超级会员 ")])),_:1}),f(i,{class:"mt-20 vip-config-price"},{default:r((()=>[y(" ￥"+g(j.value.vip_price),1)])),_:1}),f(i,{class:"mt-16 vip-config-old-price"},{default:r((()=>[y(" ￥"+g(j.value.vip_original),1)])),_:1})])),_:1}),f(i,{class:"article-box mt-32 flex items-center"},{default:r((()=>[f(t,{class:"icon-28 mr-20",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAABEVJREFUSEu9lm1sU1UYx//n3s51LcqWbgM2u7jStU1nYmJQVzOisCkxAmEyN3zBwQfHovGTChM1kgi4gd8QAyMGJgQHAiMCIeh4cyadMowf3NJuZZt0HTK2rNN1r/feY87tWrv13r7El/vx3uc5v/uc5/+c8yeI81wFNBar9QnwZDUlKALFQwAyZ9OGQNBHKNog0vNdbvePKwAh1pJE7SMDFdgsr4DjdoDIkPgPRR8kaceDrq5GtWBF4N2HzUunKd9EQJaxRN5oRNrKUqQ6HNDkm8BlpMvrSSN+CL09mHI6MXGlBaLXK7+noO33EXHDol89t+aDo4B3bOanRI4/BUIyGej+6hroy16IXx2AQPMZ/NlwIAimdIiXxPIlLs/1yOQ5QBnGa1oAaLQrViKjfg84nT4hWChIGg9gZNtWTF69wl4JvCiURkLDQG/hUjOhGierTP/qRqTXbk8KND/YX7cbgWNH5UopERzGjlseFiMDmUDMhVYn6xmrzLBv/z+ChZKH33pTrpT11NjhfiwM7LdZqsBzR1jPsk83J72Nan/HtndwfVmwp6K0iamXyPK327qZ9NM/3qUqEDo1hcDJExg//w2Enl6ZoTHlQ7d6LfQVlSCpqYpcJiT/h+8z6fZ1d7oKyG92SzFPuFZW3eKL3yomiUP3MLylGjNul+L3FKsNhoMN4DOzFL///tyzcpUilZYTn932CSWoXVC1GQvf3RqVwCobrCyH4JF7rvowaNbxJsVKR/fuwVjjYTahO0m/3doKQooNBxqgLV4eteDY0UaM1tclJKKF22qxYGNVVOzkD60Yrqlm76+Rfrutl/Vv0aUWaHJzo4IHK8ox09mREDDFXojsk6eiYgWfD3dXlcp9JF67dYIQol3yU7uiOn2PPgJMTycEJGk65Ny4GRXL1Hrn8WUMOMa2dAKEaHNu/qK4/8kB05Bz42d1IGTg/7ylYdEc+gJax5P/vWgSGYt7L1dixu2OMxZWZB0/EXMsCEVdxODnYfHFSzEG/3VVaIrVCsPBQzEGfxVE7+3g4M852nbuhn5dmSI0eLQ1YfzcOfnSlY+2fBN0a9ZAX7FB/Wg72wz/B9v/PtpY4m1bwSaO5w/zxjxknz7z7x7e69ZCHBiAJIqb81zdR8LXk6XQ6qTy9VQCw77PEpq7eEHDb9Rg8vvrIKDtuZHXE0ucewG/hvTa9+Ktp/qdCgJGP92LwLEvlS/gUKbXZn6a8JrvghajBBn19Ulvr2wx3nlbroxZDCoKzxhdnmshRpSJkqEc/3XQROXhgS010KkIaX6J42eb8cfn+yEO+IKVSeKLkTAWr2gT2fZy0HzFesqCGDitpASpRQ6k5JtAZm0iHfFjhtnENicmLl+WpR9clLZLEF4K+ZjIH1M1wmH1cvxHSRhhjySJu5ga1RocE8iS2Jya7JYiDbjnw1afzFp9irDVFyBd6Onsaotn9f8CvpPubOMJ2pkAAAAASUVORK5CYII=",mode:""}),y(" 支付即表示同意："),f(_,{class:"article-link-btn",onClick:s[0]||(s[0]=a=>(A("/pages_common/pages/article/article",{type:3}),void console.log("前往文章")))},{default:r((()=>[y("《会员服务协议》")])),_:1})])),_:1}),f(i,{class:"mt-70"},{default:r((()=>[f(w,{shape:"circle",text:"立即购买",color:"#E42B28",onClick:U})])),_:1}),f(i,{class:"vip-pay-rule mt-36"},{default:r((()=>[f(i,{class:""},{default:r((()=>[y(" 1.支付完成后，服务将立即生效； ")])),_:1}),f(i,{class:""},{default:r((()=>[y(" 2.会员支付前，请先阅读会员服务协议和隐私条款； ")])),_:1}),f(i,{class:""},{default:r((()=>[y(" 3.付款后不支持退款 ")])),_:1})])),_:1}),f(h,{ref_key:"vipPayRef",ref:N,price:j.value.vip_price,payType:K.value,"onUpdate:payType":s[1]||(s[1]=a=>K.value=a),onConfirm:J},null,8,["price","payType"])])),_:1})}}},[["__scopeId","data-v-b8b5e3cf"]]);export{I as default};
