import{z as a,A as s,p as l,o as e,c as t,w as o,i as c,r as n,e as u,a as r,b as i,m,d,D as p,x as f,P as _,t as v,as as g,aw as F,Q as b}from"./index-Dmu3mr1_.js";import{_ as h}from"./uv-navbar.CCP2bw2Z.js";import{_ as B}from"./uv-icon.zJBDCHES.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{u as j}from"./common.knSLbAE6.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";const w=x({__name:"userinfo",setup(x){const w=a(),{userinfo:y}=s(w),I=l(""),k=async()=>{console.log("handleInputBlur",I.value),I.value!==y.value.nickname&&(await F({nickname:I.value}),b("修改成功"),w.getUserInfo())};return e((a=>{console.log("options",a),w.getUserInfo().then((()=>{I.value=y.value.nickname}))})),(a,s)=>{const l=n(u("uv-navbar"),h),e=c,x=d,U=n(u("uv-icon"),B),V=_;return r(),t(e,{class:""},{default:o((()=>[i(l,{title:"个人信息",fixed:"","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),i(e,{class:"gap"}),i(e,{class:"cell-item"},{default:o((()=>[i(e,{class:"label"},{default:o((()=>[m(" 修改头像 ")])),_:1}),i(e,{class:"content",onClick:s[0]||(s[0]=a=>{g({count:1,success:async a=>{const s=a.tempFilePaths,l=a.tempFiles;console.log("需要上传的临时地址",s,l);try{const a=await j(s[0]);console.log("上传完毕",a),await F({avatar:a.data.url}),b("修改成功"),w.getUserInfo()}catch(e){console.log("e",e)}}})})},{default:o((()=>[i(x,{class:"avatar mr-10",src:p(f)(p(y).avatar),mode:"aspectFill"},null,8,["src"]),i(U,{name:"arrow-right",color:"#BBBBBB"})])),_:1})])),_:1}),i(e,{class:"gap"}),i(e,{class:"cell-item"},{default:o((()=>[i(e,{class:"label"},{default:o((()=>[m(" 修改昵称 ")])),_:1}),i(e,{class:"content"},{default:o((()=>[i(V,{style:{"text-align":"right"},modelValue:I.value,"onUpdate:modelValue":s[1]||(s[1]=a=>I.value=a),type:"text",placeholder:"请输入",onBlur:k},null,8,["modelValue"])])),_:1})])),_:1}),i(e,{class:"gap"}),i(e,{class:"cell-item"},{default:o((()=>[i(e,{class:"label"},{default:o((()=>[m(" ID ")])),_:1}),i(e,{class:"content"},{default:o((()=>[m(v(p(y).id),1)])),_:1})])),_:1}),i(e,{class:"gap"}),i(e,{class:"cell-item"},{default:o((()=>[i(e,{class:"label"},{default:o((()=>[m(" 会员 ")])),_:1}),i(e,{class:"content"},{default:o((()=>[m(v(0==p(y).vip_status?"未开通":"已开通"),1)])),_:1})])),_:1}),i(e,{class:"gap"})])),_:1})}}},[["__scopeId","data-v-cce84215"]]);export{w as default};
