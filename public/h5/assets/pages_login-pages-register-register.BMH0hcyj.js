import{_ as e}from"./uv-navbar.CCP2bw2Z.js";import{K as s,L as o,p as a,o as l,c as t,w as c,i,r,e as n,a as m,b as d,d as u,P as p,m as f,t as _,l as g,E as v,Q as b,R as x,$ as w,a7 as y,a8 as h}from"./index-Dmu3mr1_.js";import{_ as k}from"./uv-button.CRA7t01f.js";import{_ as V}from"./uv-code.DyexNmvp.js";import{_ as j,a as F,b as C}from"./icon_pwd.BPSJVt6e.js";import{_ as U}from"./icon_radio.wqROh66g.js";import{_ as E}from"./icon_radio_check.ClKEc5B7.js";import{_ as R}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";const S=R({__name:"register",setup(R){s();const S=o({mobile:"",password:"",captcha:"",password_confirm:"",invitecode:""}),B=a(60),Q=a(""),T=a(),G=a(!1),I=e=>{Q.value=e},K=e=>{w("/pages_common/pages/article/article",{type:e}),console.log("前往文章")},L=()=>{G.value=!G.value};return l((e=>{console.log("options",e)})),(s,o)=>{const a=r(n("uv-navbar"),e),l=u,w=p,R=i,P=g,Y=r(n("uv-button"),k),Z=r(n("uv-code"),V);return m(),t(R,{class:""},{default:c((()=>[d(a,{title:"注册","bg-color":"#E42B28","auto-back":"","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),d(R,{class:"px-32"},{default:c((()=>[d(R,{class:"login-form mt-56"},{default:c((()=>[d(R,{class:"login-form-item px-40 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:j,mode:""}),d(w,{modelValue:S.mobile,"onUpdate:modelValue":o[0]||(o[0]=e=>S.mobile=e),class:"ml-16 login-input",type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),d(R,{class:"login-form-item mt-40 pl-40 pr-28 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:F,mode:""}),d(w,{modelValue:S.captcha,"onUpdate:modelValue":o[1]||(o[1]=e=>S.captcha=e),class:"mx-16 login-input",type:"text",placeholder:"验证码"},null,8,["modelValue"]),d(R,{class:"send-btn center",onClick:o[2]||(o[2]=e=>(async()=>{S.mobile?11==String(S.mobile).length?T.value.canGetCode?(await x({mobile:S.mobile,event:"register"}),b("验证码已发送"),T.value.start()):b("倒计时结束后再发送"):b("手机号格式不正确"):b("请输入手机号")})())},{default:c((()=>[f(_(Q.value),1)])),_:1})])),_:1}),d(R,{class:"login-form-item px-40 mt-40 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:C,mode:""}),d(w,{modelValue:S.password,"onUpdate:modelValue":o[3]||(o[3]=e=>S.password=e),class:"ml-16 login-input",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),d(R,{class:"login-form-item px-40 mt-40 flex items-center"},{default:c((()=>[d(l,{class:"icon-40",src:C,mode:""}),d(w,{modelValue:S.password_confirm,"onUpdate:modelValue":o[4]||(o[4]=e=>S.password_confirm=e),class:"ml-16 login-input",type:"password",placeholder:"确认密码"},null,8,["modelValue"])])),_:1}),d(R,{class:"login-form-item px-40 mt-40 flex items-center"},{default:c((()=>[d(w,{modelValue:S.invitecode,"onUpdate:modelValue":o[5]||(o[5]=e=>S.invitecode=e),class:"ml-16 login-input",type:"text",placeholder:"请输入邀请码(可选)"},null,8,["modelValue"])])),_:1}),d(R,{class:"article-wrap flex items-center"},{default:c((()=>[G.value?(m(),t(l,{key:1,class:"icon-28 mr-10",src:E,mode:"",onClick:o[7]||(o[7]=e=>L())})):(m(),t(l,{key:0,class:"icon-28 mr-10",src:U,mode:"",onClick:o[6]||(o[6]=e=>L())})),f(" 我已阅读并同意"),d(P,{class:"btn",onClick:o[8]||(o[8]=v((e=>K(1)),["stop"]))},{default:c((()=>[f("《用户协议》")])),_:1}),f("和"),d(P,{class:"btn",onClick:o[9]||(o[9]=v((e=>K(2)),["stop"]))},{default:c((()=>[f("《隐私政策》")])),_:1})])),_:1}),d(R,{class:"login-form-submit-btn",onClick:o[10]||(o[10]=e=>(async()=>{console.log("handleRegisterSubmit",S);const e=[{key:"mobile",message:"请输入手机号"},{key:"captcha",message:"请输入验证码"},{key:"password",message:"请输入密码"},{key:"password_confirm",message:"请输入确认密码"}].find((e=>!S[e.key]));if(e)return b(e.message);if(S.password!=S.password_confirm)return b("两次输入的密码不一致");if(!G.value)return b("请先同意用户协议和隐私政策");const s=await y(S);console.log("register",s),b("注册成功"),setTimeout((()=>{h()}),600)})())},{default:c((()=>[d(Y,{text:"确认注册",shape:"circle",color:"#E42B28"})])),_:1})])),_:1})])),_:1}),d(Z,{seconds:B.value,ref_key:"code",ref:T,onChange:I},null,8,["seconds"])])),_:1})}}},[["__scopeId","data-v-89c50fc4"]]);export{S as default};
