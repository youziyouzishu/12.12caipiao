import{K as e,p as s,L as l,M as a,o,c as t,w as c,i,N as n,r,e as m,a as d,b as p,d as u,O as g,m as f,g as _,P as v,t as b,D as y,$ as w,l as h,E as x,Q as k,R as j,s as C,T as V}from"./index-Dmu3mr1_.js";import{_ as S}from"./uv-button.CRA7t01f.js";import{_ as U}from"./uv-code.DyexNmvp.js";import{_ as E}from"./logo.BpRhGWqT.js";import{_ as L,a as Q,b as R}from"./icon_pwd.BPSJVt6e.js";import{_ as T}from"./icon_radio.wqROh66g.js";import{_ as B}from"./icon_radio_check.ClKEc5B7.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-loading-icon.BL07fx-H.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";const F=D({__name:"login",setup(D){n((e=>({ad7cde60:"code"===G.value?"0%":"50%"})));const F=e(),G=s("code"),I=s(!1),K=s(60),M=s(""),N=s(),O=l({login_type:"1",mobile:"",password:"",captcha:""});a((()=>{O.login_type="code"===G.value?"1":"2"}));const P=()=>{I.value=!I.value},$=e=>{G.value=e,O.captcha="",O.password=""},q=e=>{w("/pages_common/pages/article/article",{type:e}),console.log("前往文章")},z=e=>{M.value=e};return o((e=>{console.log("options",e)})),(e,s)=>{const l=u,a=i,o=v,n=r(m("uv-button"),S),D=h,A=r(m("uv-code"),U);return d(),t(a,{class:"uni-nav-top login-container p-32"},{default:c((()=>[p(a,{class:"logo-wrap mt-66 center"},{default:c((()=>[p(l,{class:"logo",src:E,mode:"widthFix"})])),_:1}),p(a,{class:"login-type-subsection"},{default:c((()=>[p(a,{class:g(["login-type-subsection-item center",{"login-type-subsection-item-active":"code"===G.value}]),onClick:s[0]||(s[0]=e=>$("code"))},{default:c((()=>[f(" 验证码登录 ")])),_:1},8,["class"]),p(a,{class:g(["login-type-subsection-item center",{"login-type-subsection-item-active":"pwd"===G.value}]),onClick:s[1]||(s[1]=e=>$("pwd"))},{default:c((()=>[f(" 密码登录 ")])),_:1},8,["class"])])),_:1}),p(a,{class:"login-form mt-56"},{default:c((()=>[p(a,{class:"login-form-item px-40 flex items-center"},{default:c((()=>[p(l,{class:"icon-40",src:L,mode:""}),p(o,{modelValue:O.mobile,"onUpdate:modelValue":s[2]||(s[2]=e=>O.mobile=e),class:"ml-16 login-input",type:"number",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),"code"===G.value?(d(),t(a,{key:0,class:"login-form-item mt-40 pl-40 pr-28 flex items-center"},{default:c((()=>[p(l,{class:"icon-40",src:Q,mode:""}),p(o,{modelValue:O.captcha,"onUpdate:modelValue":s[3]||(s[3]=e=>O.captcha=e),class:"mx-16 login-input",type:"text",placeholder:"验证码"},null,8,["modelValue"]),p(a,{class:"send-btn center",onClick:s[4]||(s[4]=e=>(async()=>{O.mobile?11==String(O.mobile).length?N.value.canGetCode?(await j({mobile:O.mobile,event:"login"}),k("验证码已发送"),N.value.start()):k("倒计时结束后再发送"):k("手机号格式不正确"):k("请输入手机号")})())},{default:c((()=>[f(b(M.value),1)])),_:1})])),_:1})):_("",!0),"pwd"===G.value?(d(),t(a,{key:1,class:"login-form-item px-40 mt-40 flex items-center"},{default:c((()=>[p(l,{class:"icon-40",src:R,mode:""}),p(o,{modelValue:O.password,"onUpdate:modelValue":s[5]||(s[5]=e=>O.password=e),class:"ml-16 login-input",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})):_("",!0),p(a,{class:"flex items-center justify-between mt-16 login-form-btns"},{default:c((()=>[p(a,{class:"",onClick:s[6]||(s[6]=e=>y(w)("/pages_login/pages/register/register"))},{default:c((()=>[f(" 注册账号 ")])),_:1}),p(a,{class:"flex items-center",onClick:s[7]||(s[7]=e=>y(w)("/pages_login/pages/forget-pwd/forget-pwd"))},{default:c((()=>[p(l,{class:"icon mr-10",src:"/h5/static/icons/icon_help.png",mode:""}),f(" 忘记密码 ")])),_:1})])),_:1}),p(a,{class:"login-form-submit-btn mt-80",onClick:s[8]||(s[8]=e=>(async()=>{if(O.mobile)if(11==String(O.mobile).length)if("1"!=O.login_type||O.captcha)if("2"!=O.login_type||O.password){if(!I.value)return k("请先同意用户协议和隐私政策");console.log("登录",O),await F.login(O),C({url:"/pages/index/index"}),V("refreshLogin")}else k("请输入密码");else k("请输入验证码");else k("手机号格式不正确");else k("请输入手机号")})())},{default:c((()=>[p(n,{text:"登录",shape:"circle",color:"#E42B28"})])),_:1})])),_:1}),p(a,{class:"article-wrap flex items-center"},{default:c((()=>[I.value?(d(),t(l,{key:1,class:"icon-28 mr-10",src:B,mode:"",onClick:s[10]||(s[10]=e=>P())})):(d(),t(l,{key:0,class:"icon-28 mr-10",src:T,mode:"",onClick:s[9]||(s[9]=e=>P())})),f(" 我已阅读并同意"),p(D,{class:"btn",onClick:s[11]||(s[11]=x((e=>q(1)),["stop"]))},{default:c((()=>[f("《用户协议》")])),_:1}),f("和"),p(D,{class:"btn",onClick:s[12]||(s[12]=x((e=>q(2)),["stop"]))},{default:c((()=>[f("《隐私政策》")])),_:1})])),_:1}),p(A,{seconds:K.value,ref_key:"code",ref:N,onChange:z},null,8,["seconds"])])),_:1})}}},[["__scopeId","data-v-1d8a996a"]]);export{F as default};
