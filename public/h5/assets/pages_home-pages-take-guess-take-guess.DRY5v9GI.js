import{p as e,ai as a,r as t,e as s,c as l,a as o,w as n,b as c,S as i,h as u,F as r,j as d,k as f,i as m,g as p,d as v,m as _,t as g,z as k,A as y,o as b,aj as h,a2 as x,u as w,ak as j,al as C,am as F,O as T,a5 as I,$ as L,x as G,an as S,Q as B,T as E,ao as M}from"./index-Dmu3mr1_.js";import{_ as O}from"./uv-navbar.CCP2bw2Z.js";import{_ as z}from"./uv-parse.DvGtt_1J.js";import{_ as A}from"./uv-button.CRA7t01f.js";import{_ as Q}from"./uv-popup.-CA74lk7.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as N}from"./uv-modal.C8ueCcq2.js";import{c as R}from"./c-take-guess-item.Dmj1d0vX.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";import"./uv-overlay.CooXhWSs.js";const U=V({__name:"c-preview-images",props:{list:{type:Array,default:()=>[]},current:{type:Number,default:0}},emits:["update:current","change","mark-viewed","close"],setup(k,{emit:y}){const b=k,h=y,x=e(null),w=e(b.current);let j=0;const C=e(!0);a((()=>b.current),(e=>{w.value=e}));const F=e=>{w.value=e.detail.current,h("update:current",e.detail.current),h("change",e.detail.current)},T=()=>{h("mark-viewed",j),L()},I=()=>{h("mark-cancelviewed",j),L()},L=()=>{x.value.close()},G=e=>{console.log("handleMaskClick"),h("close")};return(e,a)=>{const y=v,b=m,h=f,w=i,S=t(s("uv-popup"),Q);return o(),l(b,{class:"preview-container"},{default:n((()=>[c(w,{class:"swiper-box",vertical:!0,current:k.current,onChange:F},{default:n((()=>[(o(!0),u(r,null,d(k.list,((e,a)=>(o(),l(h,{key:a,onLongpress:t=>((e,a)=>{j=e,C.value=!a,x.value.open()})(a,e.is_can),onClick:G},{default:n((()=>[c(b,{class:"swiper-item"},{default:n((()=>[c(y,{class:"preview-image",src:e.url,mode:"widthFix"},null,8,["src"]),e.is_can?(o(),l(b,{key:0,class:"viewed-tag"},{default:n((()=>[c(b,{class:"status"}),_(" 已看 ")])),_:1})):p("",!0),c(b,{class:"viewed-tag"},{default:n((()=>[_(g(e.id_text),1)])),_:2},1024),c(b,{class:"viewed-num"},{default:n((()=>[_(g(a+1)+"/"+g(k.list.length),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onLongpress"])))),128))])),_:1},8,["current"]),c(S,{ref_key:"actionSheet",ref:x,mode:"bottom"},{default:n((()=>[c(b,{class:"action-sheet"},{default:n((()=>[C.value?(o(),l(b,{key:0,class:"action-item",onClick:T},{default:n((()=>[_("标记已看")])),_:1})):(o(),l(b,{key:1,class:"action-item",onClick:I},{default:n((()=>[_("取消已看")])),_:1})),c(b,{class:"action-item cancel",onClick:L},{default:n((()=>[_("取消")])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-d77d42ac"]]),W=V({__name:"take-guess",setup(a){const i=e([]),f=e(0),v=e(!1),Q=e(),V=async e=>{await M({lottery_football_ids:[i.value[e].id]}),B("标记完成"),i.value[e].is_can=!0,E("refreshTakeGuessList")},W=async e=>{await S({lottery_football_ids:[i.value[e].id]}),B("取消标记成功!"),i.value[e].is_can=!1,E("refreshTakeGuessList")},X=()=>{v.value=!1},Y=k(),{userinfo:Z}=y(Y),$=e({}),q=e([]),D=e(2),H=e=>{D.value=e,P()},J=()=>{w.setItem("isOneShare",1),K()},K=()=>{1==w.getItem("isOneShare")||Q.value.open()},P=async()=>{const e=await F({type:D.value});console.log("getFootballList",e),q.value=e};return b((e=>{console.log("options",e),P(),h("refreshTakeGuessList",(()=>{P()})),x().then((e=>{$.value=e,w.setItem("config",e)})).catch((e=>{console.log("getConfig失败",e),$.value=w.getItem("config")}))})),j((()=>{C("refreshTakeGuessList")})),(e,a)=>{const k=t(s("uv-navbar"),O),y=t(s("uv-parse"),z),b=m,h=t(s("uv-button"),A),x=t(s("c-preview-images"),U),w=t(s("uv-modal"),N);return o(),l(b,{class:"h-100-bg-drak take-guess-container"},{default:n((()=>[c(b,{class:"top-box"},{default:n((()=>[c(k,{title:"竞彩足球",fixed:"","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;font-size: 40rpx;","left-icon-color":"#FFFFFF",placeholder:""}),c(b,{class:"today-box bg-white px-32 py-20"},{default:n((()=>[c(b,{class:"today-content"},{default:n((()=>[c(y,{content:$.value.today_plan},null,8,["content"])])),_:1}),c(b,{class:"mt-20 today-btns flex items-center justify-between"},{default:n((()=>[c(b,{class:T(["today-btn center flex-column",{"today-btn-active":1==D.value}]),onClick:a[0]||(a[0]=e=>H(1))},{default:n((()=>[c(b,{class:""},{default:n((()=>[_(" 早场 ")])),_:1}),c(b,{class:"mt-4"},{default:n((()=>[_(" 截止出票时间 "+g($.value.early_stop_time),1)])),_:1})])),_:1},8,["class"]),c(b,{class:T(["today-btn center flex-column",{"today-btn-active":2==D.value}]),onClick:a[1]||(a[1]=e=>H(2))},{default:n((()=>[c(b,{class:""},{default:n((()=>[_(" 晚场 ")])),_:1}),c(b,{class:"mt-4"},{default:n((()=>[_(" 截止出票时间 "+g($.value.end_stop_time),1)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),c(b,{class:"px-32 py-20 flex-1 content-box",style:{"padding-bottom":"180rpx"}},{default:n((()=>[(o(!0),u(r,null,d(q.value,(e=>(o(),l(b,{class:"card-box px-20 py-32 mb-24",key:e.date},{default:n((()=>[c(b,{class:"card-date"},{default:n((()=>[_(g(e.date),1)])),_:2},1024),c(b,{class:"mt-20 flex flex-wrap video-list"},{default:n((()=>[(o(!0),u(r,null,d(e.list,((a,t)=>(o(),l(b,{class:"video-list-item",key:a.id},{default:n((()=>[c(R,{item:a,onChange:s=>((e,a)=>{if(console.log("handleTakeGuessItemClick",e,a),0==Z.value.vip_status)return void I({title:"提示",content:"请开通会员后查看",confirmText:"前往开通",confirmColor:"#E42B28",success:function(e){e.confirm&&L("/pages_shop/pages/shop/shop")}});const{current:t=0,list:s=[]}=a;f.value=t,i.value=[],i.value=s.map((e=>({url:G(e.image),is_can:e.has_log,id_text:e.id_text,id:e.id}))),v.value=!0})(a,{current:t,list:e.list})},null,8,["item","onChange"])])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),c(b,{class:"setting-btns flex items-center justify-between"},{default:n((()=>[c(h,{class:"share-btn",color:"#E42B28",text:"转发到彩票站",onClick:a[2]||(a[2]=e=>K())})])),_:1}),v.value?(o(),l(x,{key:0,list:i.value,current:f.value,onMarkViewed:V,onMarkCancelviewed:W,onClose:X},null,8,["list","current"])):p("",!0),c(w,{ref_key:"modal",ref:Q,title:"提示",content:"",align:"center","show-cancel-button":"",onConfirm:J},{default:n((()=>[c(b,{class:"share-modal-content"},{default:n((()=>[_(" 请在 首页 点击我的-我的彩票站信息-扫码或者搜索添加彩票站微信 ")])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-06713b83"]]);export{W as default};
