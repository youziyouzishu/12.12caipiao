import{z as e,K as l,p as t,L as o,o as a,c as s,w as n,i,r as c,e as d,a as m,b as u,m as r,P as p,l as f,t as _,g as b,Q as v,R as h,V as g,W as y,$ as w}from"./index-Dmu3mr1_.js";import{_ as x}from"./uv-navbar.CCP2bw2Z.js";import{_ as V}from"./uv-button.CRA7t01f.js";import{_ as k}from"./uv-code.DyexNmvp.js";import{_ as j}from"./uv-modal.C8ueCcq2.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-status-bar.C2pO0b0Y.js";import"./mixin.qHq9NBSw.js";import"./uv-icon.zJBDCHES.js";import"./uv-loading-icon.BL07fx-H.js";import"./uv-popup.-CA74lk7.js";import"./uv-overlay.CooXhWSs.js";const F=C({__name:"bindMobile",setup(C){const F=e(),U=l(),B=t(60),E=t(""),z=t(),M=t(""),R=t(),S=o({old_mobile:"",old_captcha:"",new_mobile:"",new_captcha:""}),q=t(),G=o({type:1,title:"",content:""}),Q=e=>{E.value=e},W=async()=>{S.old_mobile?11==String(S.old_mobile).length?z.value.canGetCode?(await h({mobile:S.old_mobile,event:"checkmobile"}),v("验证码已发送"),z.value.start()):v("倒计时结束后再发送"):v("手机号格式不正确"):v("请输入手机号")},I=e=>{M.value=e},K=async()=>{S.new_mobile?11==String(S.new_mobile).length?R.value.canGetCode?(await h({mobile:S.new_mobile,event:"changemobile"}),v("验证码已发送"),R.value.start()):v("倒计时结束后再发送"):v("手机号格式不正确"):v("请输入手机号")},L=()=>{q.value.close()},P=()=>{1==G.type?(console.log("需要重新登录"),U.reset(),F.reset(),L(),y({url:"/pages/login/login"})):2==G.type&&(console.log("绑定失败，需要重新绑定"),w("/pages_common/pages/bindMobile/bindMobile",{},!1))},T=async()=>{var e;await g(S),e=1,G.title="手机号换绑成功",G.content="换绑成功，请重新登录",G.type=e,q.value.open()};return a((e=>{console.log("options",e)})),(e,l)=>{const t=c(d("uv-navbar"),x),o=i,a=p,v=f,h=c(d("uv-button"),V),g=c(d("uv-code"),k),y=c(d("uv-modal"),j);return m(),s(o,{class:"p-32"},{default:n((()=>[u(t,{title:"更换手机号",fixed:"","auto-back":"","bg-color":"#E42B28","title-style":"color: #FFFFFF;","left-icon-color":"#FFFFFF",placeholder:""}),u(o,{class:"bind-form"},{default:n((()=>[u(o,{class:"bind-form-title"},{default:n((()=>[r(" 请输入旧手机号 ")])),_:1}),u(o,{class:"bind-form-item"},{default:n((()=>[u(o,{class:"bind-form-item-label"},{default:n((()=>[r(" +86 ")])),_:1}),u(o,{class:"bind-form-item-content"},{default:n((()=>[u(a,{modelValue:S.old_mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>S.old_mobile=e),class:"input",type:"text",placeholder:"输入手机号"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"bind-form-item"},{default:n((()=>[u(o,{class:"bind-form-item-label"},{default:n((()=>[r(" 验证码 ")])),_:1}),u(o,{class:"bind-form-item-content"},{default:n((()=>[u(a,{modelValue:S.old_captcha,"onUpdate:modelValue":l[1]||(l[1]=e=>S.old_captcha=e),class:"input",type:"text",placeholder:"输入短信验证码"},null,8,["modelValue"]),u(v,{class:"get-code ml-20",onClick:W},{default:n((()=>[r(_(E.value),1)])),_:1})])),_:1})])),_:1}),u(o,{class:"bind-form-title mt-60"},{default:n((()=>[r(" 请输入新手机号 ")])),_:1}),u(o,{class:"bind-form-item"},{default:n((()=>[u(o,{class:"bind-form-item-label"},{default:n((()=>[r(" +86 ")])),_:1}),u(o,{class:"bind-form-item-content"},{default:n((()=>[u(a,{modelValue:S.new_mobile,"onUpdate:modelValue":l[2]||(l[2]=e=>S.new_mobile=e),class:"input",type:"text",placeholder:"输入手机号"},null,8,["modelValue"])])),_:1})])),_:1}),u(o,{class:"bind-form-item"},{default:n((()=>[u(o,{class:"bind-form-item-label"},{default:n((()=>[r(" 验证码 ")])),_:1}),u(o,{class:"bind-form-item-content"},{default:n((()=>[u(a,{modelValue:S.new_captcha,"onUpdate:modelValue":l[3]||(l[3]=e=>S.new_captcha=e),class:"input",type:"text",placeholder:"输入短信验证码"},null,8,["modelValue"]),u(v,{class:"get-code ml-20",onClick:K},{default:n((()=>[r(_(M.value),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(o,{class:"mt-88"},{default:n((()=>[u(h,{color:"#E42B28",text:"确认重置",shape:"circle",onClick:l[4]||(l[4]=e=>T())})])),_:1}),u(g,{seconds:B.value,ref_key:"oldCode",ref:z,onChange:Q,"unique-key":"old-code-bind-mobile"},null,8,["seconds"]),u(g,{seconds:B.value,ref_key:"newCode",ref:R,onChange:I,"unique-key":"new-code-bind-mobile"},null,8,["seconds"]),u(y,{ref_key:"modalRef",ref:q,title:G.title,content:G.content,align:"center"},{confirmButton:n((()=>[u(o,{class:"center p-20"},{default:n((()=>[2==G.type?(m(),s(h,{key:0,style:{width:"228rpx",height:"72rpx","font-size":"28rpx","margin-right":"36rpx"},shape:"circle",color:"#0181CE",onClick:L},{default:n((()=>[r("取消")])),_:1})):b("",!0),u(h,{style:{width:"228rpx",height:"72rpx","font-size":"28rpx"},shape:"circle",color:"#E42B28",onClick:P},{default:n((()=>[r("确定")])),_:1})])),_:1})])),_:1},8,["title","content"])])),_:1})}}},[["__scopeId","data-v-5ed334de"]]);export{F as default};
